package org.nvip.entities;

import jakarta.persistence.*;
import lombok.*;

import java.time.LocalDateTime;

@Entity
@Getter
@Setter
@ToString
@AllArgsConstructor
@NoArgsConstructor
@Table(name = "vulnerabilityversion")
public class VulnerabilityVersion {
    @Id
    @Column(name = "vuln_version_id")
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int vulnerabilityVersionId;

    @ToString.Exclude
    @ManyToOne
    @JoinColumn(name="cve_id", referencedColumnName = "cveId")
    Vulnerability vulnerability;

    @ToString.Exclude
    @OneToOne
    @JoinColumn(name="vdo_set_id", referencedColumnName = "vdoSetId")
    VdoSet vdoSet;

    @ToString.Exclude
    @OneToOne
    @JoinColumn(name="cpe_set_id", referencedColumnName = "cpeSetId")
    CpeSet cpeSet;

    @ToString.Exclude
    @OneToOne
    @JoinColumn(name="description_id", referencedColumnName = "descriptionId")
    Description description;

    @Basic private LocalDateTime createdDate;
    @Basic private LocalDateTime publishedDate;
    @Basic private LocalDateTime lastModifiedDate;

    private Integer userId;

    public VulnerabilityVersion(Vulnerability vulnerability, VdoSet vdoSet, CpeSet cpeSet, Description description, LocalDateTime createdDate, LocalDateTime publishedDate, LocalDateTime lastModifiedDate, int userId) {
        this.vulnerability = vulnerability;
        this.vdoSet = vdoSet;
        this.cpeSet = cpeSet;
        this.description = description;
        this.createdDate = createdDate;
        this.publishedDate = publishedDate;
        this.lastModifiedDate = lastModifiedDate;
        this.userId = userId;
    }
}
